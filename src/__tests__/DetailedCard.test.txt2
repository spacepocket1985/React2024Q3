import { render, screen} from '@testing-library/react';
import configureMockStore from 'redux-mock-store';
import { MemoryRouter as Router } from 'react-router-dom';
import '@testing-library/jest-dom';
import { Provider } from 'react-redux';
import { store } from '../store/store';
import * as useGetRtkQuery from '../store/slices/apiSlice';
import { CardDetails } from '../components/cardDetails/cardDetails';
import { mockInitialState } from './mocks/mocksData';
import { SearchPage } from '../pages/SearchPage';

describe('Tests for the CardDetails component', () => {
  it('checks that the component contains an RTK query call when rendering', async () => {
    const spyAPIcall = vi.spyOn(useGetRtkQuery, 'useGetCharacterQuery');
    
    render(
      <Router initialEntries={['/searchPage?filter=&pageNumber=1&details=2']}>
        <Provider store={store}>
          <CardDetails />
        </Provider>
      </Router>
    );
    //expect(spyAPIcall).toHaveBeenCalled();
    const prevBtn = await screen.findByTestId('prevBtn1');
    expect(prevBtn).toBeInTheDocument;
    
  });
});
